# 选择功能样式设计文档

## 设计概述

本文档描述了AI网页总结器扩展中选择功能的视觉设计和样式实现，包括选择模式的高亮效果、悬浮边框、工具栏样式以及跨网站的兼容性处理。

## 设计原则

### 1. 视觉优先级
- **高可见性**: 选择状态应该立即被用户识别
- **非侵入性**: 不影响原有页面布局和内容
- **一致性**: 在不同网站上保持统一的视觉语言

### 2. 用户体验
- **即时反馈**: 鼠标悬停和点击时提供视觉响应
- **清晰操作**: 明确指示可选中和已选择的状态
- **易于理解**: 工具栏提供清晰的功能图标和说明

### 3. 技术考虑
- **样式隔离**: 使用特定前缀避免样式冲突
- **Z-index管理**: 高优先级层级确保显示效果
- **跨网站兼容**: 适配不同网站的CSS框架

## 样式分类

### 1. 选择模式状态

#### 1.1 选择激活状态
- **背景高亮**: 半透明蓝色背景 (rgba(59, 130, 246, 0.1))
- **边框效果**: 2px实线边框 (rgba(59, 130, 246, 0.6))
- **过渡动画**: 0.2s缓动过渡

#### 1.2 悬浮高亮状态
- **增强背景**: 提高透明度至0.15
- **边框强化**: 边框变为3px，颜色加深
- **阴影效果**: 添加轻微阴影提升层次感

#### 1.3 已选择状态
- **主色调**: 绿色系 (rgba(34, 197, 94, 0.1))
- **边框颜色**: 绿色边框 (rgba(34, 197, 94, 0.8))
- **确认标识**: 添加对勾图标

### 2. 边框效果设计

#### 2.1 基础边框
```css
.ai-selection-border {
  border: 2px solid rgba(59, 130, 246, 0.6);
  border-radius: 6px;
  transition: all 0.2s ease;
}
```

#### 2.2 悬浮边框增强
```css
.ai-selection-border:hover {
  border-width: 3px;
  border-color: rgba(59, 130, 246, 0.9);
  box-shadow: 0 0 12px rgba(59, 130, 246, 0.3);
}
```

#### 2.3 动画边框
- **脉冲效果**: 使用CSS动画创建呼吸灯效果
- **渐变边框**: 多色渐变边框增强视觉效果
- **动画控制**: 可通过CSS类控制动画开关

### 3. 工具栏设计

#### 3.1 位置与布局
- **位置**: 固定在选择元素上方
- **对齐**: 居中对齐，适应不同元素宽度
- **间距**: 与元素保持适当间距

#### 3.2 视觉设计
- **背景**: 毛玻璃效果背景
- **阴影**: 深度阴影增强立体感
- **圆角**: 8px圆角保持现代感
- **边框**: 1px细边框

#### 3.3 按钮设计
- **尺寸**: 36x36px标准尺寸
- **图标**: 16x16px SVG图标
- **状态**: 正常、悬浮、按下三种状态
- **颜色**: 主色调蓝色系

### 4. 跨网站兼容性

#### 4.1 样式隔离策略
- **前缀命名**: 所有类名使用`ai-selection-`前缀
- **命名空间**: 使用CSS命名空间避免冲突
- **重置样式**: 重要属性使用`!important`

#### 4.2 Z-index管理
- **层级分配**:
  - 选择边框: 9998
  - 工具栏: 9999
  - 提示信息: 10000

#### 4.3 响应式适配
- **移动端**: 调整工具栏大小和位置
- **小屏幕**: 优化按钮尺寸和间距
- **触摸设备**: 增加点击区域大小

## 颜色方案

### 主色调
- **蓝色系**: #3B82F6 (选择中)
- **绿色系**: #22C55E (已选择)
- **红色系**: #EF4444 (警告/错误)
- **灰色系**: #6B7280 (禁用状态)

### 透明度层级
- **背景**: 0.1 (正常) → 0.15 (悬浮) → 0.2 (已选择)
- **边框**: 0.6 (正常) → 0.8 (强化) → 0.9 (悬浮)

### 阴影系统
- **轻度**: 0 2px 4px rgba(0, 0, 0, 0.1)
- **中度**: 0 4px 8px rgba(0, 0, 0, 0.15)
- **重度**: 0 8px 16px rgba(0, 0, 0, 0.2)
- **彩色**: 0 0 12px rgba(59, 130, 246, 0.3)

## 动画效果

### 1. 进入动画
- **淡入效果**: opacity 0 → 1
- **缩放动画**: transform scale(0.95) → scale(1)
- **位移效果**: transform translateY(-10px) → translateY(0)

### 2. 状态切换
- **颜色过渡**: 200ms缓动
- **边框变化**: 150ms响应
- **阴影渐变**: 300ms层次感

### 3. 交互动画
- **按钮反馈**: 100ms按压效果
- **图标变换**: 200ms旋转/缩放
- **工具栏出现**: 250ms滑入效果

## 兼容性考虑

### 1. CSS框架冲突
- **Bootstrap**: 覆盖其基础样式
- **Tailwind**: 避免类名冲突
- **自定义框架**: 样式重置策略

### 2. 浏览器支持
- **现代浏览器**: 完整功能支持
- **旧版浏览器**: 降级到基础样式
- **移动浏览器**: 触摸优化

### 3. 性能优化
- **GPU加速**: 使用transform和opacity
- **动画优化**: 避免layout重排
- **内存管理**: 及时清理动画类

## 实现要点

### 1. 样式注入
- **时机**: DOM加载完成后注入
- **位置**: head标签内或shadow DOM
- **清理**: 页面卸载时移除

### 2. 事件处理
- **鼠标事件**: hover、click、mousemove
- **键盘事件**: ESC取消、Enter确认
- **触摸事件**: 移动端触摸优化

### 3. 状态管理
- **选择状态**: 单选/多选切换
- **工具栏状态**: 显示/隐藏控制
- **动画状态**: 播放/暂停管理

## 测试清单

### 视觉效果测试
- [ ] 高亮效果在深色主题下可见
- [ ] 工具栏不遮挡重要内容
- [ ] 选择边框与元素边界对齐
- [ ] 动画流畅无卡顿

### 兼容性测试
- [ ] 在主流网站上正常工作
- [ ] 与页面原有样式无冲突
- [ ] 移动端触摸操作正常
- [ ] 不同屏幕尺寸适配良好

### 性能测试
- [ ] 样式注入不影响页面加载
- [ ] 动画使用GPU加速
- [ ] 内存使用稳定
- [ ] CPU占用率合理

## 维护和扩展

### 1. 主题定制
- 支持深色/浅色主题切换
- 可配置颜色方案
- 自定义动画参数

### 2. 功能扩展
- 添加更多选择模式
- 支持自定义工具栏按钮
- 集成快捷键系统

### 3. 性能监控
- 样式渲染性能
- 动画帧率监控
- 内存使用追踪
