# Chrome扩展跨设备同步功能使用指南

## 🚀 新功能概述

您的Chrome扩展现在支持**跨设备同步功能**！可以在不同设备间无缝同步API设置和可选的历史记录。

## 📱 支持的设备

- ✅ Windows 桌面Chrome
- ✅ macOS 桌面Chrome  
- ✅ Linux 桌面Chrome
- ✅ Android Chrome
- ✅ iOS Chrome

**前提条件**: 所有设备必须使用同一个Google账号登录Chrome

## 🎯 功能特性

### 🔄 默认同步（API设置）
**完全自动，无需任何操作**
- API提供商选择（OpenAI/Anthropic/Custom）
- API密钥（安全加密同步）
- 自定义API端点URL
- 模型名称
- 其他偏好设置

### 📚 可选同步（历史记录）
**用户可控，默认关闭**
- 总结历史记录同步
- 隐私保护优先
- 可选择同步记录数量（20/50/100条）

## 🛠️ 使用方法

### 第一次设置（任一设备）

1. **打开扩展设置**
   - 右键点击扩展图标 → "选项"
   - 或访问 `chrome://extensions/` → 找到扩展 → "详情" → "扩展程序选项"

2. **配置API设置**
   - 选择API提供商
   - 输入API密钥
   - 设置其他偏好

3. **设置会自动同步！**
   - 无需额外操作
   - 几秒钟内同步到所有设备

### 在其他设备上使用

1. **打开任意网页**
2. **点击扩展图标**
3. **设置已自动同步！**
   - API配置直接可用
   - 无需重新输入

### 管理历史记录同步

1. **进入设置页面**
2. **找到"跨设备同步"区域**
3. **开启历史记录同步**
   - 切换开关为"开启"
   - 选择要同步的记录数量
4. **立即同步按钮**
   - 手动触发同步操作
   - 强制更新所有设备数据

## 📊 同步状态说明

设置页面会显示实时同步状态：

- 🟢 **绿色**: 同步正常，所有设备数据一致
- 🟡 **橙色**: 同步进行中，请稍等
- 🔴 **红色**: 同步错误，检查网络连接
- ⚪ **灰色**: 设备离线，使用本地设置

### 状态详情
- **最后同步时间**: 显示精确到秒的时间戳
- **同步设备数**: 显示连接的设备数量
- **数据大小**: 显示已同步数据量

## 🔧 高级功能

### 冲突解决
当多个设备同时修改设置时：
- **自动策略**: 选择最后修改的设置
- **用户通知**: 显示冲突解决信息
- **可追溯**: 保留修改历史

### 隐私控制
- **历史记录同步**: 默认关闭，保护隐私
- **一键关闭**: 随时可停止同步
- **选择性删除**: 可清除特定同步数据

### 容量管理
- **API设置**: 约2KB，自动同步
- **历史记录**: 可配置，节省流量
- **智能压缩**: 移除不必要内容

## 🚨 故障排除

### 同步不工作？

1. **检查Google账号**
   - 确保所有设备使用同一Google账号
   - Chrome设置 → 人员 → 检查登录状态

2. **检查网络连接**
   - 确保设备联网
   - 同步需要网络连接

3. **手动同步**
   - 设置页面 → "立即同步"按钮
   - 强制更新所有数据

4. **清除同步数据**
   - 设置页面 → "清除同步数据"按钮
   - 重新开始同步流程

### 历史记录不同步？

1. **确认开关状态**
   - 检查"历史记录同步"是否开启
   - 绿色开关表示已开启

2. **检查记录数量**
   - 确认选择的记录数量设置
   - 建议选择50条或更少

3. **网络延迟**
   - 历史记录同步可能需要更长时间
   - 最多等待2-3分钟

### API密钥同步失败？

1. **加密问题**
   - 系统会自动处理加密
   - 无需用户操作

2. **权限问题**
   - 确保扩展有存储权限
   - 重新加载扩展

## 💡 使用技巧

### 最佳实践
1. **首次设置**: 在主要设备上完成所有设置
2. **稳定网络**: 在网络稳定时进行首次同步
3. **定期检查**: 偶尔检查同步状态
4. **隐私优先**: 根据需要开启历史记录同步

### 节省流量
1. **关闭历史同步**: 默认情况下保持关闭
2. **限制记录数**: 选择较小的记录数量
3. **定期清理**: 删除不需要的历史记录

### 性能优化
1. **批量操作**: 避免频繁修改设置
2. **离线使用**: 网络断开时扩展仍可正常使用
3. **自动恢复**: 网络恢复后自动同步

## 🔒 安全说明

### 数据保护
- **端到端加密**: API密钥使用AES-256加密
- **本地存储**: 加密密钥仅存在设备本地
- **Chrome保护**: 使用Chrome官方安全同步服务
- **隐私控制**: 用户完全控制同步范围

### 同步数据
- **仅限设置**: 同步数据仅为配置信息
- **无内容上传**: 不会上传网页内容
- **历史可选**: 历史记录同步需要用户明确同意
- **可逆操作**: 随时可以停止同步

## 📞 支持与反馈

如果遇到问题：
1. 检查本指南的故障排除部分
2. 查看Chrome扩展的开发者控制台错误
3. 重新加载扩展并重试
4. 如持续问题，请提供详细错误信息

---

**享受跨设备同步的便利！** 🎉

现在您可以在任何设备上使用统一的配置，无需重复设置。
